webpackJsonp([1],{751:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var o=(0,j.getRoom)(e,t.params.cuid);return{room:o,user:e.users.user}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var u in i)void 0===o[u]&&(o[u]=i[u]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];o.children=a}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),p=(n(c),o(2)),f=(n(p),o(36)),d=o(24),h=o(23),m=o(27),y=o(158),v=n(y),b=o(760),g=n(b),_=o(759),w=n(_),O=o(756),S=n(O),k=o(68),j=o(157),P=o(54),C=o(282),D=a(m.Button,{color:"secondary",tag:d.Link,to:"/"},void 0,a(v["default"],{name:"chevron-left"})),M=a(v["default"],{name:"times-circle"}),R=a(h.FormattedMessage,{id:"roomUnJoin"}),E=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,P.setReadMessages)(this.props.room)),this.props.dispatch((0,k.setActiveRoom)(this.props.room))}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,k.setActiveRoom)(null))}},{key:"handleUnJoinRoom",value:function(e){this.props.dispatch((0,k.unJoinRoomRequest)(e))}},{key:"render",value:function(){var e=this,t={overflowX:"scroll"},o=this.props.room.participantsData?this.props.room.participantsData.filter(function(e){return e.isWritting}):[];return a("div",{},void 0,a(m.Card,{},void 0,a(m.CardHeader,{},void 0,a(m.Row,{},void 0,a(m.Col,{xs:"6"},void 0,a("h1",{},void 0,this.props.room.title)),a(m.Col,{xs:"6",className:"text-right"},void 0,a(m.ButtonGroup,{},void 0,D,(0,C.isUserParticipating)(this.props.room,this.props.user)?a(m.Button,{outline:!0,color:"danger",onClick:function(){e.handleUnJoinRoom(e.props.room)}},void 0,M," ",R):null))),a(g["default"],{room:this.props.room})),a(m.CardBlock,{style:t},void 0,a(w["default"],{room:this.props.room}),o.map(function(e,t){return a("div",{},t,a("em",{},void 0,e.name," is writting..."))}),a(S["default"],{room:this.props.room}))))}}]),t}(c.Component);E.need=[function(e){return(0,k.fetchRoom)(e.cuid)}],t["default"]=(0,f.connect)(u)(E)},756:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return{user:e.users.user,isSending:e.messages.isSending}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var u in i)void 0===o[u]&&(o[u]=i[u]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];o.children=a}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),p=(n(c),o(36)),f=o(27),d=(o(23),o(158)),h=n(d),m=o(56),y=o(55),v=a(h["default"],{name:"spinner",spin:!0}),b=a(h["default"],{name:"paper-plane-o"}),g=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={content:""},o.handleChange=o.handleChange.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o}return s(t,e),l(t,[{key:"componentWillUpdate",value:function(e,t){""==this.state.content&&""!=t.content?this.props.dispatch((0,y.sendSocket)({type:"userIsWritting",data:this.props.user})):""!=this.state.content&&""==t.content&&this.props.dispatch((0,y.sendSocket)({type:"userStopWritting",data:this.props.user}))}},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(e){return e.preventDefault(),this.props.dispatch((0,m.sendMessage)()),this.props.dispatch((0,m.addMessageRequest)(this.props.user,this.props.room,this.state.content)),this.setState({content:""}),!1}},{key:"isSending",value:function(){return this.props.isSending}},{key:"render",value:function(){return a("div",{className:"mt-3"},void 0,a(f.Form,{onSubmit:this.handleSubmit},void 0,a(f.InputGroup,{},void 0,a(f.Input,{type:"text",name:"content",value:this.state.content,placeholder:"Type your message here...",onChange:this.handleChange,disabled:this.isSending(),autoFocus:!0}),a(f.InputGroupButton,{},void 0,a(f.Button,{color:"success",disabled:this.isSending()},void 0,this.isSending()?v:b)))))}}]),t}(c.Component);t["default"]=(0,p.connect)(u)(g)},757:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return{user:e.users.user}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var u in i)void 0===o[u]&&(o[u]=i[u]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];o.children=a}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),p=(n(c),o(36)),f=o(27),d=o(281),h=n(d),m=o(762),y=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.toggle=o.toggle.bind(o),o.getFormattedDate=o.getFormattedDate.bind(o),o.state={collapse:!1},o}return s(t,e),l(t,[{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"isWriter",value:function(){return this.props.message.user.cuid==this.props.user.cuid}},{key:"getFormattedDate",value:function(){return(0,m.dateFormat)(this.props.message.dateAdded)}},{key:"render",value:function(){return a("div",{},void 0,this.isWriter()?a("div",{className:"text-right"},void 0,a("a",{onClick:this.toggle,style:{marginBottom:"1rem"}},void 0,this.props.message.content," ",a(h["default"],{user:this.props.message.user,isHidden:this.props.isSameWriter},this.props.message.cuid)),a(f.Collapse,{isOpen:this.state.collapse},void 0,a("small",{},void 0,this.getFormattedDate()))):a("div",{},void 0,a("a",{onClick:this.toggle,style:{marginBottom:"1rem"}},void 0,a(h["default"],{id:this.props.message.cuid,user:this.props.message.user,isHidden:this.props.isSameWriter},this.props.message.cuid)," ",this.props.message.content),a(f.Collapse,{isOpen:this.state.collapse},void 0,a("small",{},void 0,this.getFormattedDate()))))}}]),t}(c.Component);t["default"]=(0,p.connect)(u)(y)},759:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return{room:(0,y.getRoom)(e,t.room.cuid)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var u in i)void 0===o[u]&&(o[u]=i[u]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];o.children=a}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),p=(n(c),o(36)),f=o(23),d=o(27),h=o(757),m=n(h),y=o(157),v=o(68),b=a(d.Alert,{color:"warning"},void 0,a(f.FormattedMessage,{id:"roomNoMessages"})),g=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t){this.init()}},{key:"init",value:function(){this.props.room&&!this.props.room.messagesData&&this.props.dispatch((0,v.fetchMessages)(this.props.room))}},{key:"render",value:function(){var e=null;return a("div",{},void 0,this.props.room.messagesData?this.props.room.messagesData.length?a("div",{},void 0,this.props.room.messagesData.map(function(t){var o=!1;return e==t.user.cuid&&(o=!0),e=t.user.cuid,a(m["default"],{message:t,isSameWriter:o},t.cuid)})):b:null)}}]),t}(c.Component);t["default"]=(0,p.connect)(u)(g)},760:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return{room:(0,y.getRoom)(e,t.room.cuid)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,o,n,r){var i=t&&t.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var u in i)void 0===o[u]&&(o[u]=i[u]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+3];o.children=a}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),p=(n(c),o(36)),f=o(23),d=o(27),h=o(281),m=n(h),y=o(157),v=o(68),b=a(d.Alert,{color:"warning"},void 0,a(f.FormattedMessage,{id:"roomNoParticipants"})),g=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t){this.init()}},{key:"init",value:function(){this.props.room&&!this.props.room.participantsData&&this.props.dispatch((0,v.fetchParticipants)(this.props.room))}},{key:"render",value:function(){return a("div",{},void 0,this.props.room.participantsData?this.props.room.participantsData.length?a("div",{},void 0,this.props.room.participantsData.map(function(e){return a(m["default"],{id:e.cuid,user:e},e.cuid)})):b:null)}}]),t}(c.Component);t["default"]=(0,p.connect)(u)(g)},762:function(e,t){"use strict";function o(e){return new Date(e).toDateString()}Object.defineProperty(t,"__esModule",{value:!0}),t.dateFormat=o}});